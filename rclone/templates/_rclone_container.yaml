# Command examples:
#   exec tail -f /dev/null
#   exit 1
#   exit 0

{{- define "rclone.container" -}}
- name: rclone
  image: rclone/rclone:sha-6805da6
  command: ["/bin/sh","-c"]
  args:
  - {{ required ".cmd missing" .cmd | quote }}
  securityContext:
    runAsNonRoot: true
    runAsUser: 1009
    runAsGroup: 1009
  volumeMounts:
{{- required ".volumeMountScripts missing" .volumeMountScripts | list | toYaml | nindent 2 }}
  - name: {{ required ".volumeNameConf missing" .volumeNameConf }}
    mountPath: /config/rclone
    readOnly: true
  - name: {{ required ".volumeNameBck missing" .volumeNameBck }}
    mountPath: /bck
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "256Mi"
      cpu: "200m"
{{- end -}}
