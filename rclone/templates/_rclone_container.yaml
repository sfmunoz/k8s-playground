# XXX: keep volumeMounts at the end to keep template extensibility
# at render time (adding volumeMount entries right after it)

{{- define "rclone.container" -}}
- name: rclone
  image: rclone/rclone:sha-6805da6
  command: ["/bin/sh","-c"]
  args:
  - {{ required ".cmd missing" .cmd | quote }}
  securityContext:
    runAsNonRoot: true
    runAsUser: 1009
    runAsGroup: 1009
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  volumeMounts:
  - name: {{ required ".volName missing" .volName }}
    mountPath: /config/rclone
    readOnly: true
{{- end -}}
